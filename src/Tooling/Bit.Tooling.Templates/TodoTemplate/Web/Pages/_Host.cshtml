@page "/"

@namespace TodoTemplate.Pages

@using TodoTemplate.App
@using TodoTemplate.Shared;

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_Layout";
    var isBlazorServer = BlazorModeDetector.Current.IsBlazorServer();
    var isSpa = WebAppDeploymentTypeDetector.Current.IsSPA();
    var isStatic = WebAppDeploymentTypeDetector.Current.IsStatic();
    var isPwa = WebAppDeploymentTypeDetector.Current.IsPWA();
    RenderMode renderMode =  isStatic ? RenderMode.Static : isBlazorServer ? isSpa || isPwa ? RenderMode.Server : RenderMode.ServerPrerendered : isSpa || isPwa ? RenderMode.WebAssembly : RenderMode.WebAssemblyPrerendered;
}

@if (isPwa)
{
    <div id="app"></div>
}
else
{
    <component type="typeof(App)"
           render-mode="@renderMode" />
}
